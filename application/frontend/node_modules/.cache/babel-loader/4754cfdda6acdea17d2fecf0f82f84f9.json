{"ast":null,"code":"var _jsxFileName = \"D:\\\\Documenti\\\\GitHub\\\\ZooGames\\\\application\\\\frontend\\\\src\\\\Giochi\\\\Impiccato\\\\Popup.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { checkWin } from './helpers.js';\nimport { supabase } from '../../components/Database.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst db = supabase;\n\nconst Popup = _ref => {\n  _s();\n\n  let {\n    correctLetters,\n    wrongLetters,\n    selectedWord,\n    setPlayable,\n    playAgain,\n    points,\n    id\n  } = _ref;\n  const [scoreUpdated, setScoreUpdated] = useState(true);\n\n  const score = async () => {\n    await db.from('users').select(`score`).eq('id', id).single();\n  };\n\n  let finalScore = 0;\n\n  async function updateScore(userId, score) {\n    if (userId != null && !scoreUpdated) {\n      try {\n        setScoreUpdated(true);\n        finalScore = 0;\n        const userScore = await supabase.from('users').select('score').eq('id', userId);\n        finalScore = parseInt(score + userScore.data[0].score);\n        await supabase.from('users').update({\n          'score': finalScore\n        }).eq('id', userId);\n        console.log(\"Punteggio Arggiornato! Ora hai: \" + finalScore + \" punti\");\n      } catch (err) {\n        console.log(\"Errore nell'aggiornamento del punteggio: \" + err);\n      }\n    }\n  }\n\n  let finalMessage = '';\n  let finalMessageRevealWord = '';\n  let playable = true;\n\n  if (checkWin(correctLetters, wrongLetters, selectedWord) === 'win') {\n    finalMessage = 'Congratulazioni! Hai vinto 10 punti! ðŸ˜ƒ';\n    playable = false;\n    points += 10;\n    updateScore(id, points);\n  } else if (checkWin(correctLetters, wrongLetters, selectedWord) === 'lose') {\n    finalMessage = 'Sfortunatamente non hai indovinato, hai perso 10 punti ðŸ˜•';\n    finalMessageRevealWord = `...la parola era: ${selectedWord}`;\n    playable = false;\n    points -= 10;\n  }\n\n  useEffect(() => {\n    setPlayable(playable);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"popup-container\",\n    style: finalMessage !== '' ? {\n      display: 'flex'\n    } : {},\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"popup\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: finalMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: finalMessageRevealWord\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"c3-play\",\n        onClick: playAgain,\n        children: \"Gioca di nuovo!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Popup, \"FM8CwLa8IIuBHIDxy6ICcrPHRgw=\");\n\n_c = Popup;\nexport default Popup;\n\nvar _c;\n\n$RefreshReg$(_c, \"Popup\");","map":{"version":3,"names":["React","useEffect","useState","checkWin","supabase","db","Popup","correctLetters","wrongLetters","selectedWord","setPlayable","playAgain","points","id","scoreUpdated","setScoreUpdated","score","from","select","eq","single","finalScore","updateScore","userId","userScore","parseInt","data","update","console","log","err","finalMessage","finalMessageRevealWord","playable","display"],"sources":["D:/Documenti/GitHub/ZooGames/application/frontend/src/Giochi/Impiccato/Popup.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { checkWin } from './helpers.js';\r\nimport { supabase } from '../../components/Database.js';\r\n\r\nconst db = supabase;\r\n\r\nconst Popup = ({correctLetters, wrongLetters, selectedWord, setPlayable, playAgain, points, id}) => {\r\n  const [scoreUpdated, setScoreUpdated] = useState(true)\r\n\r\n  const score = async () => {\r\n    await db\r\n    .from('users')\r\n    .select(`score`)\r\n    .eq('id', id)\r\n    .single()\r\n  }\r\n\r\n  let finalScore = 0\r\n  async function updateScore(userId, score) {\r\n    if (userId != null && !scoreUpdated) {\r\n      try {\r\n        setScoreUpdated(true)\r\n        finalScore = 0\r\n        const userScore = await supabase.from('users').select('score').eq('id', userId);\r\n        finalScore = parseInt(score + userScore.data[0].score);\r\n        await supabase.from('users').update({ 'score': finalScore }).eq('id', userId);\r\n        console.log(\"Punteggio Arggiornato! Ora hai: \" + finalScore + \" punti\")\r\n\r\n      } catch (err) {\r\n        console.log(\"Errore nell'aggiornamento del punteggio: \" + err);\r\n      }\r\n    }\r\n  }\r\n\r\n  let finalMessage = '';\r\n  let finalMessageRevealWord = '';\r\n  let playable = true;\r\n\r\n  if( checkWin(correctLetters, wrongLetters, selectedWord) === 'win' ) {\r\n    finalMessage = 'Congratulazioni! Hai vinto 10 punti! ðŸ˜ƒ';\r\n    playable = false;\r\n    points += 10;\r\n    updateScore(id,points)\r\n  } else if( checkWin(correctLetters, wrongLetters, selectedWord) === 'lose' ) {\r\n    finalMessage = 'Sfortunatamente non hai indovinato, hai perso 10 punti ðŸ˜•';\r\n    finalMessageRevealWord = `...la parola era: ${selectedWord}`;\r\n    playable = false;\r\n    points -= 10;\r\n  }\r\n\r\n  useEffect(() => {\r\n    setPlayable(playable);\r\n  });\r\n\r\n  return (\r\n    <div className=\"popup-container\" style={finalMessage !== '' ? {display:'flex'} : {}}>\r\n      <div className=\"popup\">\r\n        <h2>{finalMessage}</h2>\r\n        <h3>{finalMessageRevealWord}</h3>\r\n        <button className='c3-play' onClick={playAgain}>Gioca di nuovo!</button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Popup\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}