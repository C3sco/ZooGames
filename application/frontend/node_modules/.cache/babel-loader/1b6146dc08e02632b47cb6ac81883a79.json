{"ast":null,"code":"var _jsxFileName = \"D:\\\\Documenti\\\\GitHub\\\\ZooGames\\\\application\\\\frontend\\\\src\\\\Giochi\\\\Quiz\\\\QuizPage.js\",\n    _s = $RefreshSig$();\n\nimport Game from './Game.js';\nimport Loading from './Loading.js';\nimport Error from './Error.js';\nimport { useState, useEffect } from 'react';\nimport he from 'he'; //per decodificare le stringhe html ricevute dall'api che se no presentano caratteri speciali\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction QuizPage(_ref) {\n  _s();\n\n  let {\n    session\n  } = _ref;\n  console.log(session); // const [isLoading, setLoading]\n\n  const [quiz, setQuiz] = useState({\n    isLoading: true,\n    error: \"\",\n    data: null\n  });\n  const {\n    isLoading,\n    error,\n    data\n  } = quiz;\n  useEffect(() => {\n    async function getQuiz() {\n      try {\n        console.log(\"Sto caricando le domande\");\n        const url = \"https://opentdb.com/api.php?amount=10&category=27\";\n        const response = await fetch(url);\n\n        if (!response.ok) {\n          throw new Error(\"Errore nella richiesta url\");\n        }\n\n        const json = await response.json();\n        const {\n          response_code,\n          results\n        } = json;\n\n        if (response_code === 1) {\n          throw new Error(\"Errore nella richiesta api, nessun risultato\");\n        }\n\n        const decoded = results.map(item => {\n          return { ...item,\n            question: he.decode(item.question),\n            correct_answer: he.decode(item.correct_answer),\n            incorrect_answers: item.incorrect_answers.map(incorrect => he.decode(incorrect))\n          };\n        });\n        setQuiz({\n          isLoading: false,\n          error: \"\",\n          data: decoded\n        });\n        console.log(json);\n      } catch (err) {\n        setQuiz({\n          isLoading: false,\n          error: \"Qualcosa è andato storto\",\n          data: null\n        });\n      }\n    }\n\n    getQuiz();\n  }, []);\n  let contents;\n\n  if (isLoading) {\n    contents = /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 20\n    }, this);\n  } else if (error !== \"\") {\n    contents = /*#__PURE__*/_jsxDEV(Error, {\n      children: \"Qualcosa non ha funzionato\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 20\n    }, this);\n  } else {\n    contents = /*#__PURE__*/_jsxDEV(Game, {\n      quizData: data\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 20\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: contents\n  }, void 0, false);\n}\n\n_s(QuizPage, \"RMeu2D5cf0l8bCH07ZAm69hvhfE=\");\n\n_c = QuizPage;\nexport default QuizPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"QuizPage\");","map":{"version":3,"names":["Game","Loading","Error","useState","useEffect","he","QuizPage","session","console","log","quiz","setQuiz","isLoading","error","data","getQuiz","url","response","fetch","ok","json","response_code","results","decoded","map","item","question","decode","correct_answer","incorrect_answers","incorrect","err","contents"],"sources":["D:/Documenti/GitHub/ZooGames/application/frontend/src/Giochi/Quiz/QuizPage.js"],"sourcesContent":["import Game from './Game.js'\r\nimport Loading from './Loading.js'\r\nimport Error from './Error.js'\r\nimport { useState, useEffect } from 'react'\r\nimport he from 'he'; //per decodificare le stringhe html ricevute dall'api che se no presentano caratteri speciali\r\n\r\n\r\nfunction QuizPage({session}) {\r\n    console.log(session)\r\n\r\n    // const [isLoading, setLoading]\r\n    const [quiz, setQuiz] = useState({ isLoading: true, error: \"\", data: null });\r\n    const { isLoading, error, data } = quiz;\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        async function getQuiz() {\r\n\r\n            try {\r\n                console.log(\"Sto caricando le domande\");\r\n                const url = \"https://opentdb.com/api.php?amount=10&category=27\";\r\n                const response = await fetch(url);\r\n                if (!response.ok) {\r\n                    throw new Error(\"Errore nella richiesta url\")\r\n                }\r\n                const json = await response.json();\r\n                const { response_code, results } = json\r\n\r\n                if (response_code === 1) {\r\n                    throw new Error(\"Errore nella richiesta api, nessun risultato\")\r\n                }\r\n\r\n                const decoded = results.map((item) => {\r\n                    return {\r\n                        ...item,\r\n                        question: he.decode(item.question),\r\n                        correct_answer: he.decode(item.correct_answer),\r\n                        incorrect_answers: item.incorrect_answers.map((incorrect) => he.decode(incorrect)),\r\n                    }\r\n                })\r\n\r\n                setQuiz({\r\n                    isLoading: false,\r\n                    error: \"\",\r\n                    data: decoded\r\n                })\r\n\r\n                console.log(json)\r\n            } catch (err) {\r\n                setQuiz({\r\n                    isLoading: false,\r\n                    error: \"Qualcosa è andato storto\",\r\n                    data: null\r\n                })\r\n            }\r\n        }\r\n        getQuiz();\r\n\r\n    }, []);\r\n\r\n    let contents;\r\n    if (isLoading) {\r\n        contents = <Loading />\r\n    } else if (error !== \"\") {\r\n        contents = <Error>Qualcosa non ha funzionato</Error>\r\n    } else {\r\n        contents = <Game quizData={data} />\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            {contents}\r\n        </>\r\n    )\r\n\r\n}\r\nexport default QuizPage"],"mappings":";;;AAAA,OAAOA,IAAP,MAAiB,WAAjB;AACA,OAAOC,OAAP,MAAoB,cAApB;AACA,OAAOC,KAAP,MAAkB,YAAlB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,EAAP,MAAe,IAAf,C,CAAqB;;;;;AAGrB,SAASC,QAAT,OAA6B;EAAA;;EAAA,IAAX;IAACC;EAAD,CAAW;EACzBC,OAAO,CAACC,GAAR,CAAYF,OAAZ,EADyB,CAGzB;;EACA,MAAM,CAACG,IAAD,EAAOC,OAAP,IAAkBR,QAAQ,CAAC;IAAES,SAAS,EAAE,IAAb;IAAmBC,KAAK,EAAE,EAA1B;IAA8BC,IAAI,EAAE;EAApC,CAAD,CAAhC;EACA,MAAM;IAAEF,SAAF;IAAaC,KAAb;IAAoBC;EAApB,IAA6BJ,IAAnC;EAGAN,SAAS,CAAC,MAAM;IAEZ,eAAeW,OAAf,GAAyB;MAErB,IAAI;QACAP,OAAO,CAACC,GAAR,CAAY,0BAAZ;QACA,MAAMO,GAAG,GAAG,mDAAZ;QACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACF,GAAD,CAA5B;;QACA,IAAI,CAACC,QAAQ,CAACE,EAAd,EAAkB;UACd,MAAM,IAAIjB,KAAJ,CAAU,4BAAV,CAAN;QACH;;QACD,MAAMkB,IAAI,GAAG,MAAMH,QAAQ,CAACG,IAAT,EAAnB;QACA,MAAM;UAAEC,aAAF;UAAiBC;QAAjB,IAA6BF,IAAnC;;QAEA,IAAIC,aAAa,KAAK,CAAtB,EAAyB;UACrB,MAAM,IAAInB,KAAJ,CAAU,8CAAV,CAAN;QACH;;QAED,MAAMqB,OAAO,GAAGD,OAAO,CAACE,GAAR,CAAaC,IAAD,IAAU;UAClC,OAAO,EACH,GAAGA,IADA;YAEHC,QAAQ,EAAErB,EAAE,CAACsB,MAAH,CAAUF,IAAI,CAACC,QAAf,CAFP;YAGHE,cAAc,EAAEvB,EAAE,CAACsB,MAAH,CAAUF,IAAI,CAACG,cAAf,CAHb;YAIHC,iBAAiB,EAAEJ,IAAI,CAACI,iBAAL,CAAuBL,GAAvB,CAA4BM,SAAD,IAAezB,EAAE,CAACsB,MAAH,CAAUG,SAAV,CAA1C;UAJhB,CAAP;QAMH,CAPe,CAAhB;QASAnB,OAAO,CAAC;UACJC,SAAS,EAAE,KADP;UAEJC,KAAK,EAAE,EAFH;UAGJC,IAAI,EAAES;QAHF,CAAD,CAAP;QAMAf,OAAO,CAACC,GAAR,CAAYW,IAAZ;MACH,CA9BD,CA8BE,OAAOW,GAAP,EAAY;QACVpB,OAAO,CAAC;UACJC,SAAS,EAAE,KADP;UAEJC,KAAK,EAAE,0BAFH;UAGJC,IAAI,EAAE;QAHF,CAAD,CAAP;MAKH;IACJ;;IACDC,OAAO;EAEV,CA5CQ,EA4CN,EA5CM,CAAT;EA8CA,IAAIiB,QAAJ;;EACA,IAAIpB,SAAJ,EAAe;IACXoB,QAAQ,gBAAG,QAAC,OAAD;MAAA;MAAA;MAAA;IAAA,QAAX;EACH,CAFD,MAEO,IAAInB,KAAK,KAAK,EAAd,EAAkB;IACrBmB,QAAQ,gBAAG,QAAC,KAAD;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAAX;EACH,CAFM,MAEA;IACHA,QAAQ,gBAAG,QAAC,IAAD;MAAM,QAAQ,EAAElB;IAAhB;MAAA;MAAA;MAAA;IAAA,QAAX;EACH;;EAGD,oBACI;IAAA,UACKkB;EADL,iBADJ;AAMH;;GAtEQ1B,Q;;KAAAA,Q;AAuET,eAAeA,QAAf"},"metadata":{},"sourceType":"module"}